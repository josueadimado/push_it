{% extends "operations/base_admin.html" %}
{% load static %}

{% block title %}Reports · Push-it Admin{% endblock %}

{% block breadcrumb %}Reports{% endblock %}

{% block admin_extra_styles %}
<style>
/* Page Header */
.page-title {
    color: var(--foreground) !important;
}

.page-subtitle {
    color: var(--muted-foreground) !important;
}

/* Report Cards Grid */
.report-cards-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
    margin-bottom: 32px;
}

.report-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.report-card-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
}

.report-icon-wrapper {
    width: 48px;
    height: 48px;
    border-radius: 8px;
    background: var(--brand-cyan-tint);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--brand-cyan);
}

.report-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--foreground) !important;
    margin-bottom: 4px;
}

.report-desc {
    font-size: 13px;
    color: var(--muted-foreground) !important;
    line-height: 1.5;
}

/* Two Column Layout */
.reports-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 24px;
}

/* Logs Container */
.logs-container {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
}

.section-header {
    padding: 16px 24px;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.section-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--foreground) !important;
}

/* Table */
.table-shell {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
}

.table-shell th {
    text-align: left;
    padding: 12px 24px;
    font-size: 13px;
    font-weight: 500;
    color: #ffffff !important;
    border-bottom: 1px solid var(--border);
    background: var(--brand-cyan);
    vertical-align: middle;
}

html.light .table-shell th {
    color: #0f172a !important;
}

.table-shell td {
    padding: 12px 24px;
    font-size: 14px;
    color: var(--foreground) !important;
    border-bottom: 1px solid var(--border);
    vertical-align: middle !important;
}

.table-shell tbody tr:hover {
    background: var(--secondary);
}

.timestamp-cell {
    color: var(--muted-foreground) !important;
    font-family: monospace;
    font-size: 13px;
}

/* Log Type Badges */
.log-type-badge {
    display: inline-flex;
    align-items: center;
    padding: 4px 10px;
    border-radius: 50px;
    font-size: 12px;
    font-weight: 500;
    background: var(--secondary);
    color: var(--secondary-foreground) !important;
    min-height: 24px;
}

.log-badge-success {
    background: var(--success);
    color: var(--success-foreground) !important;
}

.log-badge-warning {
    background: var(--warning);
    color: var(--warning-foreground) !important;
}

.log-badge-error {
    background: rgba(239, 68, 68, 0.15);
    color: #fca5a5 !important;
}

html.light .log-badge-error {
    background: #fee2e2;
    color: #991b1b !important;
}

/* Download Row */
.download-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 0;
    border-bottom: 1px solid var(--border);
}

.download-row:last-child {
    border-bottom: none;
}

.file-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.file-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
}

.file-icon-pdf {
    background: rgba(239, 68, 68, 0.15);
    color: #ef4444;
}

.file-icon-csv {
    background: var(--success);
    color: var(--success-foreground);
}

.file-icon-txt {
    background: var(--brand-cyan-tint);
    color: var(--brand-cyan);
}

.file-name {
    font-size: 13px;
    font-weight: 500;
    color: var(--foreground) !important;
}

.file-meta {
    font-size: 11px;
    color: var(--muted-foreground) !important;
}

.download-btn {
    cursor: pointer;
    color: var(--muted-foreground) !important;
    background: none;
    border: none;
    padding: 4px;
}

.download-btn:hover {
    color: var(--foreground) !important;
}

/* Buttons */
.btn-primary {
    background: var(--primary) !important;
    color: var(--primary-foreground) !important;
    border: none;
    padding: 10px 20px;
    border-radius: 50px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.btn-primary:hover {
    opacity: 0.9;
}

.btn-outline {
    background: var(--card);
    color: var(--foreground) !important;
    border: 1px solid var(--border);
    padding: 10px 20px;
    border-radius: 50px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.btn-outline:hover {
    background: var(--secondary);
}

.btn-sm {
    padding: 6px 12px;
    font-size: 12px;
}

.btn-full {
    width: 100%;
    justify-content: center;
}

/* Icon button in header */
.more-btn {
    cursor: pointer;
    color: var(--muted-foreground) !important;
    background: none;
    border: none;
    padding: 4px;
}

.more-btn:hover {
    color: var(--foreground) !important;
}

/* Responsive */
@media (max-width: 1200px) {
    .report-cards-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .reports-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .report-cards-grid {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}

{% block admin_content %}
<div class="page-header">
    <div>
        <h1 class="page-title">Reports &amp; Activity Logs</h1>
        <p class="page-subtitle">Generate system reports and review audit trails.</p>
    </div>
    <div style="display: flex; gap: 12px;">
        <button class="btn-outline">
            <iconify-icon icon="lucide:settings" style="font-size: 16px;"></iconify-icon>
            Log Settings
        </button>
        <button class="btn-primary">
            <iconify-icon icon="lucide:plus" style="font-size: 16px;"></iconify-icon>
            Generate New Report
        </button>
    </div>
</div>

<!-- Report Generation Cards -->
<div class="report-cards-grid">
    <div class="report-card">
        <div class="report-card-header">
            <div class="report-icon-wrapper">
                <iconify-icon icon="lucide:banknote" style="font-size: 24px;"></iconify-icon>
            </div>
            <button class="more-btn" title="More options">
                <iconify-icon icon="lucide:more-horizontal" style="font-size: 20px;"></iconify-icon>
            </button>
        </div>
        <div>
            <div class="report-title">Financial Statement</div>
            <div class="report-desc">Monthly breakdown of gross volume, platform fees, and payouts.</div>
        </div>
        <button class="btn-outline btn-full">Download CSV</button>
    </div>

    <div class="report-card">
        <div class="report-card-header">
            <div class="report-icon-wrapper">
                <iconify-icon icon="lucide:trending-up" style="font-size: 24px;"></iconify-icon>
            </div>
            <button class="more-btn" title="More options">
                <iconify-icon icon="lucide:more-horizontal" style="font-size: 20px;"></iconify-icon>
            </button>
        </div>
        <div>
            <div class="report-title">Growth &amp; Engagement</div>
            <div class="report-desc">User acquisition stats, retention rates, and campaign performance.</div>
        </div>
        <button class="btn-outline btn-full">Download PDF</button>
    </div>

    <div class="report-card">
        <div class="report-card-header">
            <div class="report-icon-wrapper">
                <iconify-icon icon="lucide:shield-check" style="font-size: 24px;"></iconify-icon>
            </div>
            <button class="more-btn" title="More options">
                <iconify-icon icon="lucide:more-horizontal" style="font-size: 20px;"></iconify-icon>
            </button>
        </div>
        <div>
            <div class="report-title">Compliance Audit</div>
            <div class="report-desc">Verification logs, dispute resolutions, and banned account history.</div>
        </div>
        <button class="btn-outline btn-full">Download PDF</button>
    </div>
</div>

<!-- Two Column Layout -->
<div class="reports-grid">
    <!-- Activity Logs -->
    <div class="logs-container">
        <div class="section-header">
            <div class="section-title">Recent System Activity</div>
            <button class="btn-outline btn-sm">View All Logs</button>
        </div>
        <table class="table-shell">
            <thead>
                <tr>
                    <th style="width: 20%;">Timestamp</th>
                    <th style="width: 25%;">Action</th>
                    <th style="width: 20%;">User/Admin</th>
                    <th style="width: 35%;">Details</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="timestamp-cell">Oct 24, 14:32</td>
                    <td><span class="log-type-badge log-badge-success">Payout Processed</span></td>
                    <td>System</td>
                    <td>Batch payout #8821 completed ($4,200)</td>
                </tr>
                <tr>
                    <td class="timestamp-cell">Oct 24, 11:15</td>
                    <td><span class="log-type-badge">User Verified</span></td>
                    <td>Admin User</td>
                    <td>Approved verification for @sarah_creates</td>
                </tr>
                <tr>
                    <td class="timestamp-cell">Oct 24, 09:42</td>
                    <td><span class="log-type-badge log-badge-warning">Dispute Opened</span></td>
                    <td>Brand: TechLife</td>
                    <td>Campaign #9921 reported for quality</td>
                </tr>
                <tr>
                    <td class="timestamp-cell">Oct 23, 16:20</td>
                    <td><span class="log-type-badge">Campaign Created</span></td>
                    <td>Brand: GlowUp</td>
                    <td>New campaign "Summer Launch" started</td>
                </tr>
                <tr>
                    <td class="timestamp-cell">Oct 23, 10:05</td>
                    <td><span class="log-type-badge log-badge-error">Payment Failed</span></td>
                    <td>Brand: FastFit</td>
                    <td>Card declined for Invoice #INV-2092</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Recent Downloads -->
    <div class="logs-container" style="height: fit-content;">
        <div class="section-header">
            <div class="section-title">Recent Exports</div>
        </div>
        <div style="padding: 0 24px;">
            <div class="download-row">
                <div class="file-info">
                    <div class="file-icon file-icon-pdf">
                        <iconify-icon icon="lucide:file-text" style="font-size: 16px;"></iconify-icon>
                    </div>
                    <div>
                        <div class="file-name">Finance_Oct2024.pdf</div>
                        <div class="file-meta">2.4 MB • Today</div>
                    </div>
                </div>
                <button class="download-btn" title="Download">
                    <iconify-icon icon="lucide:download-cloud" style="font-size: 16px;"></iconify-icon>
                </button>
            </div>

            <div class="download-row">
                <div class="file-info">
                    <div class="file-icon file-icon-csv">
                        <iconify-icon icon="lucide:file-spreadsheet" style="font-size: 16px;"></iconify-icon>
                    </div>
                    <div>
                        <div class="file-name">Users_Export_Q3.csv</div>
                        <div class="file-meta">840 KB • Yesterday</div>
                    </div>
                </div>
                <button class="download-btn" title="Download">
                    <iconify-icon icon="lucide:download-cloud" style="font-size: 16px;"></iconify-icon>
                </button>
            </div>

            <div class="download-row">
                <div class="file-info">
                    <div class="file-icon file-icon-txt">
                        <iconify-icon icon="lucide:file" style="font-size: 16px;"></iconify-icon>
                    </div>
                    <div>
                        <div class="file-name">System_Logs_Full.txt</div>
                        <div class="file-meta">5.1 MB • Oct 21</div>
                    </div>
                </div>
                <button class="download-btn" title="Download">
                    <iconify-icon icon="lucide:download-cloud" style="font-size: 16px;"></iconify-icon>
                </button>
            </div>
        </div>
        <div style="padding: 16px 24px;">
            <button class="btn-outline btn-full" style="font-size: 13px;">View All Files</button>
        </div>
    </div>
</div>
{% endblock %}

